<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="generator" content="made with love by dartdoc 5.0.1">
  <meta name="description" content="millicast_flutter_sdk API docs, for the Dart programming language.">
  <title>millicast_flutter_sdk - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  
</head>


<body data-base-href=""
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://github.com/qualabs/">millicast_flutter_sdk package</a></li>
  </ol>
  <div class="self-name">millicast_flutter_sdk</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="millicast-sdk-for-flutter">Millicast SDK for Flutter</h1>
<p>Flutter SDK for building a realtime broadcaster using the Millicast platform.
This Software Development Kit (SDK) for Flutter allows developers to simplify Millicast services integration into their own Android and iOS apps.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#ios">iOS</a></li>
<li><a href="#android">Android</a></li>
</ul>
</li>
<li><a href="#basic-usage">Basic Usage</a>
<ul>
<li><a href="#main-app">Main app</a></li>
<li><a href="#publisher-app">Publisher app</a></li>
<li><a href="#viewer-app">Viewer app</a></li>
<li><a href="#important-reminder">Important reminder</a></li>
</ul>
</li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#sample">Sample</a></li>
<li><a href="#sdk-developer-information">SDK developer information</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>To add the Millicast Flutter SDK to your dependencies, run:</p>
<pre class="language-sh"><code class="language-sh">$ flutter pub add millicast_flutter_sdk
</code></pre>
<p>With this you will have then access to all the features provided by the SDK to use in your project.</p>
<p>When creating your own app, follow these steps:
Add <code>flutter_webrtc</code> as a <a href="https://flutter.io/using-packages/">dependency in your pubspec.yaml file</a>.</p>
<p>You will need a Millicast account and a valid publishing token that you can find it in your dashboard (<a href="https://dash.millicast.com/#/signin">link here</a>).</p>
<h3 id="ios">iOS</h3>
<p>Add the following entry to your <em>Info.plist</em> file, located in <code>&lt;project root&gt;/ios/Runner/Info.plist</code>:</p>
<pre class="language-xml"><code class="language-xml">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) Camera Usage!&lt;/string&gt;
&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) Microphone Usage!&lt;/string&gt;
</code></pre>
<p>This entry allows your app to access the camera and microphone.</p>
<h3 id="android">Android</h3>
<p>Ensure the following permission is present in your Android Manifest file, located in <code>&lt;project root&gt;/android/app/src/main/AndroidManifest.xml</code>:</p>
<pre class="language-xml"><code class="language-xml">&lt;uses-feature android:name="android.hardware.camera" /&gt;
&lt;uses-feature android:name="android.hardware.camera.autofocus" /&gt;
&lt;uses-permission android:name="android.permission.CAMERA" /&gt;
&lt;uses-permission android:name="android.permission.RECORD_AUDIO" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;
&lt;uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /&gt;
&lt;uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /&gt;
</code></pre>
<p>If you need to use a Bluetooth device, add:</p>
<pre class="language-xml"><code class="language-xml">&lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
&lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;
</code></pre>
<p>The Flutter project template adds it, so it may already be there.
You will also need to set your build settings to Java 8, because the official WebRTC jar now uses static methods in <code>EglBase</code> interface. Just add this to your app level <code>build.gradle</code>:</p>
<pre class="language-groovy"><code class="language-groovy">android {
    //...
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}
</code></pre>
<p>If necessary, in the same <code>build.gradle</code> you will need to increase <code>minSdkVersion</code> of <code>defaultConfig</code> up to <code>21</code> (currently default Flutter generator set it to <code>16</code>).</p>
<h2 id="basic-usage">Basic Usage</h2>
<p>This is a simple Minimum V P of our project to show the publish or subscribing features. You will need to put the following three code snippets in the respective <code>main.dart</code>, <code>publisher.dart</code> and <code>viewer.dart</code> files, and set your Millicast streaming credentials where needed in order to test it.</p>
<h3 id="main-app">Main app</h3>
<pre class="language-dart"><code class="language-dart">import 'publisher.dart';
import 'viewer.dart';
import 'package:flutter_webrtc/flutter_webrtc.dart';
import 'package:flutter/material.dart';

const type = String.fromEnvironment('type');
void main() async {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Millicast SDK Demo',
      theme: ThemeData(
        primarySwatch: Colors.purple,
      ),
      home: const MyHomePage(title: 'Millicast SDK Demo'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key, required this.title}) : super(key: key);
  final String title;

  @override
  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; {
  final RTCVideoRenderer _localRenderer = RTCVideoRenderer();
  @override
  void dispose() {
    _localRenderer.dispose();
    super.dispose();
  }

  @override
  void initState() {
    initRenderers();
    switch (type) {
      case 'subscribe':
        subscribeExample();
        break;
      case 'publish':
        publishExample();
        break;
      default:
    }
    super.initState();
  }

  void publishExample() async {
    await publishConnect(_localRenderer);
    setState(() {});
  }

  void subscribeExample() async {
    await viewConnect(_localRenderer);
    setState(() {});
  }

  void initRenderers() async {
    await _localRenderer.initialize();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        // Here we take the value from the MyHomePage object that was created by
        // the App.build method, and use it to set our appbar title.
        title: Text(widget.title),
      ),
      body: OrientationBuilder(
        builder: (context, orientation) {
          return RotatedBox(
              quarterTurns: 1,
              child: Center(
                child: Container(
                  margin: const EdgeInsets.fromLTRB(0.0, 0.0, 0.0, 0.0),
                  width: MediaQuery.of(context).size.width,
                  height: MediaQuery.of(context).size.height,
                  child: RTCVideoView(_localRenderer, mirror: true),
                  decoration: const BoxDecoration(color: Colors.black54),
                ),
              ));
        },
      ),
    );
  }
}
</code></pre>
<h3 id="publisher-app">Publisher app</h3>
<pre class="language-dart"><code class="language-dart">import 'dart:io';
import 'package:flutter_webrtc/flutter_webrtc.dart';
import 'package:millicast_flutter_sdk/millicast_flutter_sdk.dart';

Future publishConnect(RTCVideoRenderer localRenderer) async {
  // Setting subscriber options
  DirectorPublisherOptions directorPublisherOptions = DirectorPublisherOptions(
      token: 'my-publishing-token', streamName: 'my-stream-name');

  /// Define callback for generate new token
  tokenGenerator() =&gt; Director.getPublisher(directorPublisherOptions);

  /// Create a new instance
  Publish publish =
      Publish(streamName: 'my-streamname', tokenGenerator: tokenGenerator);

  final Map&lt;String, dynamic&gt; constraints = &lt;String, bool&gt;{
    'audio': true,
    'video': true
  };

  MediaStream stream = await navigator.mediaDevices.getUserMedia(constraints);
  localRenderer.srcObject = stream;

  //Publishing Options
  Map&lt;String, dynamic&gt; broadcastOptions = {'mediaStream': stream};
  //Android does not support h264 codec for publishing
  if (Platform.isAndroid) {
    broadcastOptions['codec'] = 'vp8';
  }

  /// Start connection to publisher
  try {
    await publish.connect(options: broadcastOptions);
    return publish.webRTCPeer;
  } catch (e) {
    throw Exception(e);
  }
}
</code></pre>
<h3 id="viewer-app">Viewer app</h3>
<pre class="language-dart"><code class="language-dart">import 'package:flutter_webrtc/flutter_webrtc.dart';
import 'package:millicast_flutter_sdk/millicast_flutter_sdk.dart';

Future viewConnect(RTCVideoRenderer localRenderer) async {
  // Setting subscriber options
  DirectorSubscriberOptions directorSubscriberOptions =
      DirectorSubscriberOptions(
          streamAccountId: 'my-account-id', streamName: 'my-stream-name');

  /// Define callback for generate new token
  tokenGenerator() =&gt; Director.getSubscriber(directorSubscriberOptions);

  /// Create a new instance
  View view = View(
      streamName: 'my-stream-name',
      tokenGenerator: tokenGenerator,
      mediaElement: localRenderer);

  /// Start connection to publisher
  try {
    await view.connect();
    return view.webRTCPeer;
  } catch (e) {
    rethrow;
  }
}
</code></pre>
<h3 id="important-reminder">Important reminder</h3>
<p>When you compile the release apk, you need to add the following operations:
<a href="https://github.com/flutter-webrtc/flutter-webrtc/commit/d32dab13b5a0bed80dd9d0f98990f107b9b514f4">Setup Proguard Rules</a></p>
<h2 id="api-reference">API Reference</h2>
<p>You can find the latest, most up to date SDK documentation at our <a href="https://millicast.github.io/millicast_flutter_sdk/">API Reference page</a>. There are more examples with every module available.</p>
<h2 id="sample">Sample</h2>
<p>Example can be found in <a href="example">example</a> folder.</p>
<h2 id="sdk-developer-information">SDK developer information</h2>
<p>To develop and contribute to this project, there are some instructions on how to set up your environment to start contributing. <a href="developer-info.md">Follow this link</a>.</p>
<h2 id="license">License</h2>
<p>Please refer to <a href="LICENSE">LICENSE</a> file.</p>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="millicast_flutter_sdk">
  <span class="name"><a href="millicast_flutter_sdk/millicast_flutter_sdk-library.html">millicast_flutter_sdk</a></span> 

</dt>
<dd> 
</dd>

        </dl>
      </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="https://github.com/qualabs/">millicast_flutter_sdk package</a></li>
</ol>


    <h5 class="hidden-xs"><span class="package-name">millicast_flutter_sdk</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="millicast_flutter_sdk/millicast_flutter_sdk-library.html">millicast_flutter_sdk</a></li>
</ol>

  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>

</main>

<footer>
  <span class="no-break">
    millicast_flutter_sdk
      0.0.1
  </span>

  
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/script.js?v1"></script>



</body>

</html>

